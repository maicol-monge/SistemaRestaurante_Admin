@{
    ViewBag.Title = "Menú";
    Layout = "~/Views/Shared/LayoutPersonalizado.cshtml";
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menú</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/crearPlatos.css" asp-append-version="true" />
</head>
<body>
    <form action="/" method="post">
        <div class="d-md-flex flex-row mt-3">

            <div class="col-md-6 col-12">
                <div class="d-flex flex-column mx-5 px-3">
                    <h2 class="text-md-start text-center">Nuevo Platillo</h2>
                    <div class="d-md-flex d-flex flex-md-row flex-column align-items-center">
                        <div class="imagen-container d-flex justify-content-center align-items-center w-75 cardScale" style="border: 1px solid #adadad; border-radius: 10px; height: 30vh">
                            <i class="bi bi-image icono-imagen" id="icono-imagen" style="color: #AB1918"></i>
                            <img id="imagen-seleccionada" style="display: none; max-width: 200px; max-height: 200px;">
                            <input type="file" id="selector-imagen" accept="image/*" style="display: none;">
                        </div>
                        <div class="w-100">
                            <h4 class="text-md-start ms-md-3 text-center mt-5 mt-md-0" style="font-weight:600">Nombre del platillo</h4>
                            <input class="form-control ms-md-3 p-3" style="height: 10vh" type="text" name="nombre" required>
                        </div>
                    </div>
                    <div class="my-5">
                        <h3>Descripción</h3>
                        <input class="form-control p-3 w-100" type="text" name="descripcion" style="height: 12vh" value="" />
                        <div class="d-md-flex flex-column flex-md-row justify-content-between">
                            <div class="col-12 col-md-5">
                                <h4>Precio:</h4>
                                <input class="form-control w-100" type="number" name="precio" value="" />    
                            </div>
                            <div class="col-12 col-md-5">
                                <h4>Categoria:</h4>
                                <select class="form-control w-100" name="categoria" required>
                                    <option value="pizzas">Pizzas</option>
                                    <option value="hamburguesas">Hamburguesas</option>
                                    <option value="tacos">Tacos</option>
                                    <option value="ensaladas">Ensaladas</option>
                                    <option value="postres">Postres</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="d-md-flex justify-content-between">
                        <button class="btn btn-primary col-md-3 col-12 my-2 cardScale" style="background-color:#FDD73C; border: 0; color: #040404; font-weight: bold">Crear</button>
                        <button class="btn btn-primary col-md-3 col-12 my-2 cardScale" style="background-color: #0D3752; border: 0; font-weight: bold">Modificar</button>
                        <button class="btn btn-danger col-md-3 col-12 my-2 cardScale" style="font-weight: bold">Eliminar</button>
                    </div>
                    <div class="mt-5">
                        <button class="btn col-md-3 col-12 mb-5 cardScale" style="border: 3px solid black; font-weight: bold">Cancelar</button>
                    </div>
                </div>

            </div>

            <div class="col-md-6 col-12" style="overflow: auto; max-height: 100vh;">
                <h2>Platillos Existentes</h2>
                @if (ViewBag.platillosExistentes != null)
                {
                    foreach (var platillo in ViewBag.PlatillosExistentes)
                    {
                        <div class="card my-3 cardScale">
                            <div class="card-body d-md-flex flex-wrap align-items-center p-2">
                                <div style="width: 50vh; height: 12vh; overflow: hidden; border-radius: 10px; margin-right: 10px;">
                                    <img src="@platillo.Imagen" class="card-img-top" style="width: 100%; height: 100%; object-fit: cover;" alt="Imagen de platillo">
                                </div>
                                <div style="flex-grow: 1; min-width: 200px;">
                                    <h5 class="card-title text-start" style="font-size: 1.8rem">@platillo.Nombre</h5>
                                    <p class="card-text" style="font-size: 1.2rem">@platillo.Descripcion</p>
                                </div>
                                <div style="width: auto; margin-left: auto;">
                                    <p class="card-text" style="font-size: 1.8rem;"><strong>Precio:</strong> @platillo.Precio</p>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <h3>No hay platillos existentes</h3>
                }
            </div>

        </div>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const iconoImagen = document.getElementById('icono-imagen');
            const imagenSeleccionada = document.getElementById('imagen-seleccionada');
            const selectorImagen = document.getElementById('selector-imagen');

            iconoImagen.addEventListener('click', function() {
                selectorImagen.click();
            });

            imagenSeleccionada.addEventListener('click', function() {
                selectorImagen.click();
            });

            selectorImagen.addEventListener('change', function() {
                const archivo = this.files[0];

                if (archivo) {
                    const lector = new FileReader();

                    lector.addEventListener('load', function() {
                        imagenSeleccionada.src = this.result;
                        iconoImagen.style.display = 'none';
                        imagenSeleccionada.style.display = 'block';
                    });

                    lector.readAsDataURL(archivo);
                } else {
                    iconoImagen.style.display = 'block';
                    imagenSeleccionada.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>